package robot;

import khepera.escenario.Escenario;
import khepera.robot.RobotKhepera;
import corba.camara.CamaraInt;
import corba.camara.IPYPortD;
import corba.camara.suscripcionD;
import corba.instantanea.EstadoRobotD;
import corba.instantanea.EstadoRobotDHolder;
import corba.instantanea.PuntosRobotD;
import corba.khepera.escenario.EscenarioD;
import corba.khepera.robot.PosicionD;
import corba.robot.RobotSeguidorInt;

/**
 * This class is the implemetation object for your IDL interface.
 *
 * Let the Eclipse complete operations code by choosing 'Add unimplemented methods'.
 */
public class RobotSeguidorIntServerImpl extends corba.robot.RobotSeguidorIntPOA {
	
	CamaraInt camara;
	
	private IPYPortD ipyport;
	
	private String _nombre;
	private int _id;
	private String _IORrob;
	private PuntosRobotD _puntrob;
	private PosicionD _pos;
	private PosicionD _posObj;
	private int _idLider;
	
	private RobotKhepera robot;
	
	private Escenario escenario;
	private EscenarioD escenarioD;
	
	/**
	 * Constructor for RobotSeguidorIntServerImpl 
	 */
	public RobotSeguidorIntServerImpl() {
	}

	@Override
	public void ModificarEscenario(EscenarioD arg0) {
		escenarioD = arg0;
		escenario = new Escenario(escenarioD);
	}

	@Override
	public void ModificarLider(int arg0) {
		_idLider = arg0;
	}

	@Override
	public void ModificarObjetivo(PosicionD arg0) {
		_posObj = arg0;
	}

	@Override
	public void ModificarPosicion(PosicionD arg0) {
		_pos = arg0;
	}

	@Override
	public void ObtenerEstado(EstadoRobotDHolder arg0) {
		
		EstadoRobotD ERD = new EstadoRobotD(_nombre, _id, _IORrob, null, robot.posicionRobot(), _posObj, _idLider);
		
		arg0.value = ERD;
		
	}
	
	public class robotDifusion implements Runnable{
		
		public robotDifusion() {
			
			
		}

		@Override
		public void run() {
			
			suscripcionD SD = camara.SuscribirRobot(_IORrob);
			
			_id = SD.id;
			ipyport = SD.iport;
			escenarioD = SD.esc;
			escenario = new Escenario(escenarioD);
			
			
			
			while(true){
				
				
				
				
				
			}
			
		}
		
	}
}
